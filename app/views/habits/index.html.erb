<% content_for :title, "Habits" %>

<div class="w-full" 
     data-controller="swipe-navigation" 
     data-swipe-navigation-left-url-value="<%= user_path(Current.user) %>"
     data-swipe-navigation-threshold-value="80">
  <%= render partial: "shared/user_card", locals: {user: Current.user} %>
    <div id="habits" class="min-w-full divide-y divide-gray-200 space-y-5" data-tabs-target="content" data-id="active">
      <% if @habits&.any? %>
        <% @habits.each_with_index do |habit, index| %>
          <div class="flex flex-col sm:flex-row justify-between items-center pb-5 sm:pb-0 gap-8">
            <%= render partial: "habit", locals: { index: index, habit: habit } %>
          </div>
        <% end %>
        <%= link_to new_habit_path, class: "flex text-gray-500 items-center gap-2 text-medium font-semibold  justify-start bg-gray-100 w-full px-4 py-6 rounded-2xl border-2 border-dashed" do %>
          <div class="absolute w-12 h-12">
            <svg class="w-12 h-12 transform -rotate-90" viewBox="0 0 48 48">
              <circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="4" fill="none" class="text-white" />
              <circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="4" fill="none" class="text-gray-500 "
                      stroke-dasharray="100" 
                      stroke-dashoffset="100"
                      stroke-linecap="round" />
            </svg>
            <span class="absolute inset-0 text-gray-500 flex items-center justify-center" >
              <%= lucide_icon("circle-fading-plus", class: "w-5 h-5") %>
            </span>
          </div>
          <span class="mx-auto">
            Create your first habit
          </span>
        <% end %>
      <% else %>
        <div class="grid gap-6 mx-auto mt-8">
          <%= lucide_icon('flask-conical', class:"mx-auto p-3 rounded-full w-12 h-12 text-primary flex items-center justify-center bg-primary-foreground") %>
          <div class="space-y-2">
            <h2 class="text-center text-black text-base font-semibold leading-relaxed pb-1">You have not created any habits yet</h2>
            <p class="text-center text-black font-normal leading-snug pb-4">Try changing your filters to <br />see appointments</p>
            <div class="flex gap-3">
              <%= link_to new_habit_path, class: "flex text-gray-500 items-center gap-2 text-medium font-semibold  justify-start bg-gray-100 w-full px-4 py-6 rounded-2xl border-2 border-dashed" do %>
                <div class="absolute w-12 h-12">
                  <svg class="w-12 h-12 transform -rotate-90" viewBox="0 0 48 48">
                    <circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="4" fill="none" class="text-white" />
                    <circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="4" fill="none" class="text-gray-500 "
                            stroke-dasharray="100" 
                            stroke-dashoffset="100"
                            stroke-linecap="round" />
                  </svg>
                  <span class="absolute inset-0 text-gray-500 flex items-center justify-center" >
                    <%= lucide_icon("circle-fading-plus", class: "w-5 h-5") %>
                  </span>
                </div>
                <span class="mx-auto">
                  Create a new habit
                </span>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
</div>
